<!DOCTYPE html>
<html lang="es" data-theme="sunset">
<head>
  <meta charset="utf-8" />
  <title>Multimedia Knowledge S.L ‚Äî Media Converter & Downloader</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet"/>
</head>
<body class="min-h-screen bg-base-200">
  <div class="max-w-4xl mx-auto p-6 md:p-10 space-y-10">

    <!-- =============== HEADER / BRAND =============== -->
    <header class="text-center space-y-4">
      <img src="/static/MT_logo.png" alt="Multimedia Knowledge S.L" class="w-40 mx-auto" />
      <h1 class="text-3xl md:text-4xl font-extrabold">MCD</h1>
      <p class="opacity-70">
        <span>Media Converter & Downloader</span> ‚Äî Herramientas de conversi√≥n y descarga de medios
      </p>
    </header>

    <!-- =============== MEN√ö PRINCIPAL =============== -->
    <div id="menu" class="flex justify-center gap-4">
      <button class="btn btn-primary" onclick="showSection('convert')">Converter</button>
      <button class="btn btn-secondary" onclick="showSection('downloader')">Downloader</button>
    </div>

    <!-- =============== CONVERTIDOR =============== -->
    <section id="convertSection" class="hidden">
      <div class="card bg-base-100 shadow-xl">
        <div class="card-body gap-3">
          <div class="flex items-start justify-between">
            <h2 class="card-title">Convertidor de archivos</h2>
          </div>

          <p class="text-sm opacity-70">1) Selecciona un archivo o una carpeta ¬∑ 2) Elige formato destino</p>

          <!-- selector archivo/carpeta -->
          <div class="flex flex-col gap-3">
            <label class="label cursor-pointer w-fit">
              <span class="label-text mr-3">Subir carpeta</span>
              <input id="toggleDir" type="checkbox" class="toggle toggle-primary" />
            </label>

            <!-- archivo(s) sueltos -->
            <div class="flex items-center gap-3" id="singleWrap">
              <input id="file" type="file" class="file-input file-input-bordered" />
              <span id="fileBadge" class="badge badge-outline hidden"></span>
            </div>

        <!-- carpeta completa -->
        <div class="flex flex-col gap-3 hidden" id="dirWrap">
          <input id="dirInput" type="file" class="file-input file-input-bordered" webkitdirectory multiple />
          <div id="folderInfo" class="text-xs opacity-70"></div>

          <div id="folderTargets" class="flex items-center gap-3 hidden">
            <select id="folderTarget" class="select select-bordered"></select>
            <button id="btnConvertFolder" type="button" class="btn btn-primary">Convertir carpeta</button>
          </div>

          <pre id="batchLog" class="mt-1 text-xs opacity-70"></pre>
          <progress id="batchProg" class="progress w-full hidden" value="0" max="100"></progress>

          <!-- üëá NUEVO contenedor para enlaces de descarga individuales -->
          <div id="batchLinks" class="mt-2 space-y-1"></div>
        </div>


              <pre id="batchLog" class="mt-1 text-xs opacity-70"></pre>
              <progress id="batchProg" class="progress w-full hidden" value="0" max="100"></progress>
            </div>
          </div>

          <!-- objetivos para archivo suelto -->
          <div id="options" class="hidden">
            <div class="divider my-2">Convertir a</div>
            <div id="targets" class="flex flex-wrap gap-2"></div>
          </div>

          <progress id="prog" class="progress w-full hidden"></progress>
          <div id="status" class="text-sm"></div>
          <div id="download" class="mt-2"></div>

          <div class="card-actions justify-end mt-4">
            <button class="btn btn-secondary" onclick="backToMenu()">‚¨Ö Volver al men√∫</button>
          </div>
        </div>
      </div>
    </section>

    <!-- =============== DOWNLOADER =============== -->
    <section id="downloaderSection" class="hidden">
      <div class="card bg-base-100 shadow-xl">
        <div class="card-body gap-3">
          <div class="flex items-start justify-between">
            <h2 class="card-title">Descargar desde URL (YouTube, Instagram, Facebook, X‚Ä¶)</h2>
          </div>

          <div class="flex flex-col md:flex-row gap-3">
            <input id="urlInput" type="url" placeholder="Pega aqu√≠ la URL del v√≠deo o imagen"
                   class="input input-bordered flex-1"/>
            <select id="dlKind" class="select select-bordered">
              <option value="video">Video MP4</option>
              <option value="audio">Audio MP3</option>
            </select>
            <select id="dlQuality" class="select select-bordered w-36"></select>
            <button type="button" class="btn btn-primary" onclick="startFetch()">Descargar</button>
          </div>

          <progress id="prog2" class="progress w-full hidden"></progress>
          <div id="status2" class="text-sm"></div>
          <div id="download2" class="mt-2"></div>

          <div class="card-actions justify-end mt-4">
            <button class="btn btn-secondary" onclick="backToMenu()">‚¨Ö Volver al men√∫</button>
          </div>
        </div>
      </div>
    </section>

    <!-- =============== Promoci√≥n web =============== -->
    <section class="mb-32">
      <div class="text-center">
        <h1 class="opacity-70">
          Vis√≠tanos en nuestra p√°gina web
          <a href="https://www.mtknowledge.com" class="link">www.mtknowledge.com</a>
        </h1>
      </div>
    </section>
  </div>

  <!-- librer√≠a para empaquetar ZIP -->
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>

  <!-- JS principal -->
  <script src="/static/app.js"></script>
  <!-- Bugs mailto -->
  <section>
    <div class="text-center">
  <h2 class="opacity-70">Found any bugs? Submit them at <a href="mailto:info@mtknowledge.com">info@mtknowledge.com</a></h2>
  </div>
  </section>
</body>
</html>
